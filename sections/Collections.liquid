<div class='page-width collections collections--desktop' {{ section.shopify_attributes }}>
  <h3 class='text text--headline text--h3 text--center'>
    {{ section.settings.title }}
  </h3>
  <div class='collections__grid--desktop hide-mobile'>
    {% for block in section.blocks %}
      {% if block.type == 'collection_item' %}
        <a
          href='{{ block.settings.link }}'
          class='collections__grid-item'
          {{ block.shopify_attributes }}
        >
          <div class='collections__grid-item-image'>
            {% if block.settings.image != blank %}
              {{
                block.settings.image
                | image_url: width: 184, height: 184
                | image_tag: width: 184, height: 184,
                  alt: block.settings.title,
                  loading: lazy
              }}
            {% endif %}
          </div>
          <p class='text text--regular collections__grid-item-title text--center'>
            {{ block.settings.title }}
          </p>
        </a>
      {% endif %}
    {% endfor %}
  </div>
</div>

<div class='collections'>
  <h3 class='text text--headline text--h3 text--center'>
    {{ section.settings.title }}
  </h3>
  <collections-slider>
    <div
      class='collections__grid--mobile js-collections-grid swiper-container'
      {{ section.shopify_attributes }}
    >
      <div class='swiper-wrapper'>
        {% for block in section.blocks %}
          {% if block.type == 'collection_item' %}
            <div class='swiper-slide'>
              <a
                href='{{ block.settings.link }}'
                class='collections__grid-item'
                {{ block.shopify_attributes }}
              >
                <div class='collections__grid-item-image'>
                  {% if block.settings.image != blank %}
                    {{
                      block.settings.image
                      | image_url: width: 184, height: 184
                      | image_tag:
                        width: 184,
                        height: 184,
                        alt: block.settings.title,
                        loading: lazy
                    }}
                  {% endif %}
                </div>
                <p class='text text--regular collections__grid-item-title text--center'>
                  {{ block.settings.title }}
                </p>
              </a>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </collections-slider>
  <div class='swiper-pagination'></div>
</div>

{% schema %}
{
  "name": "Collections Grid",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Kategorien"
    }
  ],
  "blocks": [
    {
      "type": "collection_item",
      "name": "Collection Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Collection Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Collection Title"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Collection Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collections Grid",
      "blocks": [
        {
          "type": "collection_item"
        },
        {
          "type": "collection_item"
        },
        {
          "type": "collection_item"
        }
      ]
    }
  ]
}
{% endschema %}
